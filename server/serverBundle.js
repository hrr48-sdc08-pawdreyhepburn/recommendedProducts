!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("styled-components")},function(e,t){e.exports=require("express")},function(e,t,n){var r=n(11),i=n(6).performance;e.exports={getAll:function(e,t){var n=e.params.id;console.log("getall pinged"),r.query("SELECT t1.id, t1.price, t1.producturl, t1.image_url FROM products AS t1 INNER JOIN products AS t2 ON t2.dept_id = t1.dept_id WHERE t2.id=$1 LIMIT 35",[n]).then((function(e){t.send(e.rows)})).catch((function(e){console.log(e),t.send("error finding current id")}))},insertProduct:function(e,t){i.now();var n=e.body,o=[n.title,n.price,n.image_url,n.producturl,n.dept_id,n.brand_id];r.query("INSERT INTO products(title, price, image_url, producturl, dept_id, brand_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING *",o).then((function(e){t.send("success!")})).catch((function(e){t.send("err inserting new product into database")}))},updateProduct:function(e,t){i.now();var n=e.body,o=n.title,a=n.price,c=n.image_url,u=n.producturl,l=n.dept_id,s=n.brand_id;r.query("SELECT * FROM products WHERE id=$1",[e.params.id]).then((function(n){var d=n.rows[0];o=o||d.title,a=a||d.price,c=c||d.image_url,u=u||d.producturl,l=l||d.dept_id,s=s||d.brand_id;var p=[o,a,c,u,l,s,e.params.id];r.query("UPDATE products SET (title, price, image_url, producturl, dept_id, brand_id) = ($1, $2, $3, $4, $5, $6) WHERE id=$7",p).then((function(e){i.now();t.send("successfully updated product")})).catch((function(e){t.send("Product found, but could not update for some reason... double check the data you are sending")}))})).catch((function(e){t.send("error updating product. Are you sure it exists?")}))},deleteProduct:function(e,t){i.now();r.query("DELETE FROM products WHERE id=$1",[e.params.id]).then((function(e){i.now();t.send("succesfully deleted")})).catch((function(e){t.send("Error deleting product; are you sure it exists?")}))}}},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("perf_hooks")},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("fs")},function(e,t,n){var r=n(12).Pool,i=(n(6).performance,new r({user:"postgres",host:"44.242.53.217",database:"sdc",password:"Gohan123",port:5432}));e.exports={query:function(e,t){return new Promise((function(n,r){i.query(e,t).then((function(e){n(e)})).catch((function(e){r(e)}))}))}}},function(e,t){e.exports=require("pg")},function(e,t){e.exports=require("regenerator-runtime")},function(e,t,n){"use strict";n.r(t);n(10);var r=n(2),i=n.n(r),o=n(7),a=n.n(o),c=n(5),u=n.n(c),l=n(4),s=n.n(l),d=n(8),p=n.n(d),f=n(3),m=(n(13),n(0)),y=n.n(m),h=n(9),g=n.n(h),b=n(1),v=n.n(b);function x(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  * {\n    font-family: sans-serif;\n  }\n"]);return x=function(){return e},e}Object(b.createGlobalStyle)(x());var _=v.a.div.withConfig({displayName:"Styles__CenterTextBox",componentId:"pmufht-0"})(["text-align:center;"]),S=v.a.p.withConfig({displayName:"Styles__RecItemPrice",componentId:"pmufht-1"})(["font-size:1em;text-decoration:underline;color:grey;text-align:center;font-weight:600;"]),w=(v.a.p.withConfig({displayName:"Styles__RecItemTitle",componentId:"pmufht-2"})(["font-size:0.75em;text-decoration:underline;color:grey;text-align:center;"]),Object(b.keyframes)(["0%{transform:translate(0)}100%{transform:translate(-100%,0);}"])),E=Object(b.keyframes)(["0%{transform:translate(0)}100%{transform:translate(100%,0);}"]),I=v.a.ul.withConfig({displayName:"Styles__RecList",componentId:"pmufht-3"})(["list-style-type:none;display:flex;flex-direction:horizontal;justify-content:left;:hover button{visibility:visible;opacity:1;transition:opacity 0s linear;}"]),j=(v()(I).withConfig({displayName:"Styles__RecListScrollingLeft",componentId:"pmufht-4"})(["animation:"," 2s linear;"],w),v()(I).withConfig({displayName:"Styles__RecListScrollingRight",componentId:"pmufht-5"})(["animation:"," 2s linear;"],E),v.a.li.withConfig({displayName:"Styles__RecListItem",componentId:"pmufht-6"})(["display:inline-block;color:grey;:hover p{color:black;text-decoration:none;}"])),O=v.a.img.withConfig({displayName:"Styles__RecItemImage",componentId:"pmufht-7"})(["width:185px;height:185px;margin:6px;"]),C=v.a.div.withConfig({displayName:"Styles__NavDotContainer",componentId:"pmufht-8"})(["display:inline-block;text-align:center;width:10px;padding:3px;:hover{cursor:pointer;}"]),k=v.a.span.withConfig({displayName:"Styles__UnselectedDot",componentId:"pmufht-9"})(["border:1px solid grey;width:7px;height:7px;border-radius:50%;display:inline-block;:hover{cursor:pointer;}"]),N=v.a.span.withConfig({displayName:"Styles__SelectedDot",componentId:"pmufht-10"})(["border:1px solid grey;width:7px;height:7px;border-radius:50%;display:inline-block;margin-left:3px;margin-right:3px;background-color:grey;"]),R=v.a.a.withConfig({displayName:"Styles__RecItemAnchor",componentId:"pmufht-11"})(["text-decoration:none;"]),P=v.a.button.withConfig({displayName:"Styles__NavButton",componentId:"pmufht-12"})(["height:40px;width:40px;background-color:white;color:black;font-size:1.5em;border:2px solid black;z-index:1;border-radius:50%;margin-top:90px;visibility:hidden;opacity:0;transition:visibility 0s 0.5s,opacity 0.5s linear;:hover{cursor:pointer;}"]),A=v()(P).withConfig({displayName:"Styles__NavButtonRight",componentId:"pmufht-13"})(["justify-self:flex-end;margin-left:-40px;"]),q=v()(P).withConfig({displayName:"Styles__NavButtonLeft",componentId:"pmufht-14"})(["justify-self:flex-start;margin-right:-40px;"]),$=v.a.div.withConfig({displayName:"Styles__ItemsBox",componentId:"pmufht-15"})(["width:1450px;"]),T=function(e){var t=e.item;return e.visible?y.a.createElement(j,{key:"".concat(t.id,"-item")},y.a.createElement(R,{key:"".concat(t.id,"-anchor"),href:t.productUrl},y.a.createElement(O,{key:"".concat(t.id,"-image"),src:t.imageUrl}),y.a.createElement(S,{key:"".concat(t.id,"-price")},"$",t.price))):y.a.createElement("div",{key:"".concat(t.id,"-item")})},L=function(e){var t=e.listItems,n=e.handleClick,r=e.selectedDot,i=e.numVisible,o=e.numDots,a=r*i,c=a+i-1;console.log(A);var u=0===r,l=r===o-1;return y.a.createElement(I,null,u?"":y.a.createElement(q,{key:"navButtonLeft",onClick:function(){return n(-1)}},"ᐸ"),t.map((function(e,t){return y.a.createElement(T,{item:e,key:e.id,visible:t>=a&&t<=c})})),l?"":y.a.createElement(A,{key:"navButtonRight",onClick:function(){return n(1)}},"ᐳ"))},M=function(e){var t=e.selected,n=e.handleClick;return t?y.a.createElement(N,null):y.a.createElement(C,{onClick:function(){return n()}},y.a.createElement(k,null))};function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=function(e){for(var t=e.totalItems,n=e.itemsShown,r=e.heading,i=e.allItems,o=D(Object(m.useState)(0),2),a=o[0],c=o[1],u=D(Object(m.useState)(t||24),2),l=u[0],s=(u[1],D(Object(m.useState)(n||7),2)),d=s[0],p=(s[1],D(Object(m.useState)(Math.ceil(l/d)),2)),f=p[0],h=(p[1],[]);h.length<f;)a===h.length?h.push(1):h.push(0);return y.a.createElement("div",null,y.a.createElement($,null,y.a.createElement(_,null,y.a.createElement("h4",null,r)),y.a.createElement("div",{id:"recommended-items"},y.a.createElement(L,{listItems:i,numVisible:d,selectedDot:a,numDots:f,handleClick:function(e){return c(a+e)}})),y.a.createElement(_,null,h.map((function(e,t){return y.a.createElement(M,{selected:e,key:t,handleClick:function(){return c(t)}})})))))};function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W=function(e){var t=B(Object(m.useState)([]),2),n=t[0],r=t[1];return Object(m.useEffect)((function(){var e=window.location.pathname.slice(10)||1;Number.isInteger(parseInt(e))&&s.a.get("/api/products/".concat(e)).then((function(e){r(e.data)}))}),[]),y.a.createElement("div",null,y.a.createElement(z,{allItems:n.slice(0,24),heading:"More to Consider"}),y.a.createElement(z,{allItems:n.slice(24,35),heading:"Similar items",totalItems:11}))};function F(e,t,n,r,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,i)}var G=i()();G.use(i.a.json()),G.use(p()()),G.use(a()()),G.use("/",i.a.static(u.a.join(__dirname,"..","client","dist"))),G.use("/products/*",i.a.static(u.a.join(__dirname,"..","client","dist"))),G.get("/products/:id",(function(e,t){var n=new b.ServerStyleSheet,r=g.a.renderToString(n.collectStyles(y.a.createElement(W,null))),i=n.getStyleTags();n.seal();var o="\n  <!DOCTYPE html>\n  <html>\n    <head>".concat(i,'</head>\n    <body>\n      <div id="RecommendedProducts">').concat(r,'</div>\n      <script src="/bundle.js"><\/script>\n    </body>\n  </html>');t.send(o)})),G.get("/loaderio-*",function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.status(200).send(t.originalUrl.slice(1,-1));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){F(o,r,i,a,c,"next",e)}function c(e){F(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}()),G.post("/api/products",(function(e,t){Object(f.insertProduct)(e,t)})),G.get("/api/products/:id",(function(e,t){Object(f.getAll)(e,t)})),G.patch("/api/products/:id",(function(e,t){Object(f.updateProduct)(e,t)})),G.delete("/api/products/:id",(function(e,t){Object(f.deleteProduct)(e,t)}));G.listen(3003,(function(){console.log("running on port",3003)}))}]);